{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{168:function(_,v,a){_.exports=a.p+\"assets/img/login.7597d583.png\"},169:function(_,v,a){_.exports=a.p+\"assets/img/login_img.19007270.png\"},226:function(_,v,a){\"use strict\";a.r(v);var e=[function(){var _=this,v=_.$createElement,e=_._self._c||v;return e(\"div\",{staticClass:\"content\"},[e(\"h1\",{attrs:{id:\"登陆模块\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#登陆模块\",\"aria-hidden\":\"true\"}},[_._v(\"#\")]),_._v(\" 登陆模块\")]),_._v(\" \"),e(\"h2\",{attrs:{id:\"概述\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#概述\",\"aria-hidden\":\"true\"}},[_._v(\"#\")]),_._v(\" 概述\")]),_._v(\" \"),e(\"p\",[_._v(\"大致的\")]),_._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:a(168),alt:\"登陆流程\"}})]),_._v(\" \"),e(\"p\",[_._v(\"登陆和注册的情况都分为了 \"),e(\"strong\",[_._v(\"账号密码登陆\")]),_._v(\" 和 \"),e(\"strong\",[_._v(\"微信登陆\")]),_._v(\" 。\")]),_._v(\" \"),e(\"p\",[_._v(\"上图就是我们公司产品的一个登陆注册流程。现在 \"),e(\"strong\",[_._v(\"关注公众号\")]),_._v(\" 和 \"),e(\"strong\",[_._v(\"行业选择\")]),_._v(\" 这两个功能模块已经去掉了。行业选择在解决方案营销页中的 \"),e(\"strong\",[_._v(\"15天免费试用\")]),_._v(\" 来完善。\")]),_._v(\" \"),e(\"p\",[_._v(\"登陆成功或者注册成功之后，通过 \"),e(\"code\",[_._v(\"sso\")]),_._v(\" 登陆各项目的系统（因为我们的产品有四个项目：user，cli，biz，console），最后直接进入到概况页面。\")]),_._v(\" \"),e(\"h2\",{attrs:{id:\"各个地方登陆\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#各个地方登陆\",\"aria-hidden\":\"true\"}},[_._v(\"#\")]),_._v(\" 各个地方登陆\")]),_._v(\" \"),e(\"ul\",[e(\"li\",[e(\"code\",[_._v(\"cli\")]),_._v(\" 官网 \"),e(\"code\",[_._v(\"iframe\")]),_._v(\" 正常登陆（ \"),e(\"code\",[_._v(\"cli.im\")]),_._v(\" 的弹窗登陆）\")]),_._v(\" \"),e(\"li\",[_._v(\"活码保存时登陆。(前台建码保存活码是弹窗登陆)\")]),_._v(\" \"),e(\"li\",[e(\"code\",[_._v(\"user\")]),_._v(\" 正常登陆 ( \"),e(\"code\",[_._v(\"user.cli.im\")]),_._v(\" )\")]),_._v(\" \"),e(\"li\",[_._v(\"建筑解决方案的试用登陆( \"),e(\"code\",[_._v(\"page-building\")]),_._v(\"页面的 15天免费试用按钮)\")]),_._v(\" \"),e(\"li\",[_._v(\"……\")])]),_._v(\" \"),e(\"p\",[_._v(\"所有的登陆都是使用用户中心( \"),e(\"code\",[_._v(\"user_center\")]),_._v(\" )的那一套。\")]),_._v(\" \"),e(\"h2\",{attrs:{id:\"前台登陆的-iframe-弹窗\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#前台登陆的-iframe-弹窗\",\"aria-hidden\":\"true\"}},[_._v(\"#\")]),_._v(\" 前台登陆的 \"),e(\"code\",[_._v(\"iframe\")]),_._v(\" 弹窗\")]),_._v(\" \"),e(\"h5\",{attrs:{id:\"以-前台的-iframe-图片上传的登陆为例。\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#以-前台的-iframe-图片上传的登陆为例。\",\"aria-hidden\":\"true\"}},[_._v(\"#\")]),_._v(\" 以**前台的 \"),e(\"code\",[_._v(\"iframe\")]),_._v(\" **图片上传的登陆为例。\")]),_._v(\" \"),e(\"ul\",[e(\"li\",[e(\"p\",[_._v(\"前台登录的 \"),e(\"code\",[_._v(\"iframe\")]),_._v(\"，首先调用\"),e(\"strong\",[_._v(\"静态资源\")]),_._v(\"下面的 \"),e(\"code\",[_._v(\"login_plugin.js\")]),_._v(\" 的 \"),e(\"code\",[_._v(\"login_plugin\")]),_._v(\"方法。这个方法就是在 \"),e(\"code\",[_._v(\"body\")]),_._v(\" 中 \"),e(\"code\",[_._v(\"append\")]),_._v(\" 一个 \"),e(\"code\",[_._v(\"iframe\")]),_._v(\" 登录窗。\")]),_._v(\" \"),e(\"p\",[_._v(\"其中传入相关的参数：\")]),_._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[_._v(\"/* login_plugin.js */\\n/* \\n  @param: type 2个值， login或者join\\n  @param: isactives   1：提交生成活码，例如图片文件   2：生成活码，只有文本活码   3.转成活码\\n  @param: callback 回调方法\\n  @param: withtip 登录注册狂内有无 提示文案 . 0无，默认0 ,1有普通公共文案 ，2名片码专有文案\\n  @param: param {} , 需要附加在ifram src上的参数\\n*/\\n\\nfunction login_plugin(type, isactives, callback, withtip, param) {}\\n\")])])]),e(\"p\",[_._v(\"​\")]),_._v(\" \"),e(\"p\",[_._v(\"这个文件里面还会有一个 \"),e(\"code\",[_._v(\"callback\")]),_._v(\" 方法，是登陆成功之后的回调方法。\")]),_._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[_._v(\"/* login_plugin.js */\\n/*\\n  @param: callback，需要传入的参数\\n  @param: update_biz\\n*/\\nfunction callbackmsg(callback, update_biz) {}\\n\")])])]),e(\"p\",[_._v(\"​\")]),_._v(\" \"),e(\"p\",[_._v(\"比如：前台图片建码的生成活码的按钮，如果未登录，则出现登陆iframe弹窗，下面传入了4个参数：\")]),_._v(\" \"),e(\"p\",[e(\"code\",[_._v(\"login\")]),_._v(\" 代表 出登录框；\"),e(\"code\",[_._v(\"isactives\")]),_._v(\" 为 \"),e(\"code\",[_._v(\"1\")]),_._v(\" 代表是由图片文件生成活码；\"),e(\"code\",[_._v(\"callback\")]),_._v(\" 回调方法为空，基本上都不设置；\"),e(\"code\",[_._v(\"withtip\")]),_._v(\" 代表有普通的公共文案。代码如下：\")]),_._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[_._v(\"/* include-qrfun.js */\\n\\nseajs.use('//' + STATIC_SERVICE + '/js/login_plugin.js?v=20171215', function(cli) {\\n    cli.login_plugin('login', 1, '', 1); // 带提示的登录\\n});\\n\")])])]),e(\"p\",[_._v(\"​\")]),_._v(\" \"),e(\"p\",[_._v(\"效果如下：\")]),_._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:a(169),alt:\"登陆流程\"}})])]),_._v(\" \"),e(\"li\",[e(\"p\",[_._v(\"接下来就是 \"),e(\"strong\",[_._v(\"登陆\")]),_._v(\" 和 \"),e(\"strong\",[_._v(\"注册\")]),_._v(\" 的功能，这些都是在用户中心完成的。\")]),_._v(\" \"),e(\"blockquote\",[e(\"p\",[_._v(\"登录的主要文件：\"),e(\"code\",[_._v(\"login.tpl\")]),_._v(\"、\"),e(\"code\",[_._v(\"login.js\")])])]),_._v(\" \"),e(\"blockquote\",[e(\"p\",[_._v(\"注册的主要文件：\"),e(\"code\",[_._v(\"join_new.tpl\")]),_._v(\" 、 \"),e(\"code\",[_._v(\"join_new.js\")])])]),_._v(\" \"),e(\"p\",[_._v(\"​\")]),_._v(\" \"),e(\"p\",[_._v(\"​\")])])]),_._v(\" \"),e(\"h2\",{attrs:{id:\"登录\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#登录\",\"aria-hidden\":\"true\"}},[_._v(\"#\")]),_._v(\" 登录\")]),_._v(\" \"),e(\"p\",[_._v(\"以账号密码登录为例，因为微信登录和账号密码登录的实现逻辑都差不多。只不过微信登录的话需要绑定参数添加 \"),e(\"code\",[_._v(\"open_id\")]),_._v(\"，通过 \"),e(\"code\",[_._v(\"socket\")]),_._v(\" 实时获取 \"),e(\"code\",[_._v(\"weixinLoginInfo\")]),_._v(\" 的信息，如果状态为一的话，可以直接使用微信登录。\")]),_._v(\" \"),e(\"p\",[_._v(\"所有的登陆的逻辑都是写在：\"),e(\"code\",[_._v(\"login.js\")]),_._v(\" 中的。\")]),_._v(\" \"),e(\"p\",[_._v(\"包括对 \"),e(\"strong\",[_._v(\"用户名和密码的验证\")]),_._v(\"、\"),e(\"strong\",[_._v(\"密码输错三次之后出现验证码框\")]),_._v(\"、\"),e(\"strong\",[_._v(\"发送验证码的操作\")]),_._v(\"、\"),e(\"strong\",[_._v(\"登陆成功之后的回调判断\")]),_._v(\"、\"),e(\"strong\",[_._v(\"之前是邮箱注册没有绑定手机号的\")]),_._v(\" 等等操作。\")]),_._v(\" \"),e(\"p\",[_._v(\"当我们点击 \"),e(\"strong\",[_._v(\"确认按钮\")]),_._v(\" 的时候，便去 \"),e(\"code\",[_._v(\"verify\")]),_._v(\" 这个账户的信息和一系列关于登陆的操作：\")]),_._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[_._v(\"var form = $(\\\"#form_entry\\\").submit(function() {\\n  // 在这里进行一系列的登陆条件的判定\\n  // ...\\n  // 条件满足，进行登陆，请求登陆接口\\n  \\n  $.post('/login/entry', {“一些需要的参数”},function(){\\n    if (没有绑定手机，引导绑定手机) {\\n      // 相关操作，基本上没有了\\n    }\\n    if (登陆成功) {\\n      loginSuccess(); // 封装的登陆成功的方法\\n    }\\n  }\\n  \\n})\\n\")])])]),e(\"p\",[_._v(\"上面是一段伪代码，但是基本上的骨架就是这个，请求登陆的参数和后端确定好就可以。\")]),_._v(\" \"),e(\"p\",[_._v(\"接下来就是登陆成功的回调方法 \"),e(\"code\",[_._v(\"loginSuccess\")]),_._v(\"，这个方法做的事情，就是\")]),_._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[_._v(\"function loginSuccess(account, url_password, iframe, isactives, referer, keepstate) {\\n  \\n}\\n\")])])])])}],t=a(0),n=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},e,!1,null,null,null);v.default=n.exports}}]);","extractedComments":[]}